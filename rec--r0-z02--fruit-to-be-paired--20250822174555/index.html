<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/x-icon" href="../../favicon.ico">
    <!-- vConsole åœ¨ Phaser ä¹‹å‰åŠ è½½ -->
    <script>
        // æ£€æŸ¥æ˜¯å¦éœ€è¦å¯ç”¨ vConsole
        if (location.search.indexOf('console') > -1) {
            document.write('<script src="../../template/vconsole.min.js"><\/script>');
            document.write('<script>try { new VConsole(); console.log("vConsole å·²å¯åŠ¨"); } catch(e) { console.error("vConsole åˆå§‹åŒ–å¤±è´¥:", e); }<\/script>');
        }
    </script>

    <!-- å¯åŠ¨è¦†ç›–å±‚æ§åˆ¶è¯´æ˜ -->
    <!-- 
    URLå‚æ•°æ§åˆ¶ï¼š
    - ?console - å¯ç”¨ç§»åŠ¨ç«¯è°ƒè¯•æ§åˆ¶å°
    - ?no-overlay - éšè—å¯åŠ¨è¦†ç›–å±‚ï¼ˆç›´æ¥å¯åŠ¨æ¸¸æˆï¼‰
    - ç»„åˆä½¿ç”¨ï¼š?console&no-overlay - å¯ç”¨è°ƒè¯•å¹¶éšè—è¦†ç›–å±‚
    
    ä½¿ç”¨ç¤ºä¾‹ï¼š
    1. æ­£å¸¸è®¿é—®ï¼šgame.htmlï¼ˆæ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚ï¼‰
    2. å¯ç”¨è°ƒè¯•ï¼šgame.html?console
    3. éšè—è¦†ç›–å±‚ï¼šgame.html?no-overlayï¼ˆç›´æ¥å¯åŠ¨æ¸¸æˆï¼‰
    4. åŒæ—¶å¯ç”¨ï¼šgame.html?console&no-overlay
    
    è¯´æ˜ï¼š
    - é»˜è®¤æƒ…å†µä¸‹æ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚ï¼Œç”¨æˆ·éœ€è¦ç‚¹å‡»"å¼€å§‹ä½“éªŒ"æŒ‰é’®
    - ä½¿ç”¨ ?no-overlay å‚æ•°å¯ä»¥è·³è¿‡è¦†ç›–å±‚ï¼Œç›´æ¥å¯åŠ¨æ¸¸æˆ
    -->
    <script src="./template/phaser.min.js"></script>
    <title>rec--r0-z02--no8-war - å®šåˆ¶äº’åŠ¨é¢˜</title>
    <style>
        /* è®¾ç½®æ ¹å…ƒç´ å­—ä½“å¤§å° */
        :root {
            font-size: 16px;
        }

        @media screen and (max-width: 768px) {
            :root {
                font-size: 3.5vw;
            }
        }

        body {
            margin: 0;
            background: #000;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }

        #app {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #game-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        canvas {
            max-width: 100%;
            max-height: 100%;
            margin-left: 0 !important;
            margin-top: 0 !important;
        }

        /* åŠ è½½æŒ‡ç¤ºå™¨ */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.125rem;
            z-index: 999;
        }

        /* æ‚¬æµ®æŒ‰é’®æ ·å¼ */
        .float-button {
            position: fixed;
            top: 2vh;
            left: 2vh;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-size: 1.25rem;
            cursor: pointer;
            z-index: 1000;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 0.25rem 1rem rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .float-button:hover {
            background-color: rgba(0, 0, 0, 0.9);
            transform: translateY(-1px);
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.4);
        }

        /* å¼¹çª—æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1001;
            padding: 2vh;
            box-sizing: border-box;
        }

        .modal.show {
            display: flex !important;
        }

        .modal-content {
            background-color: white;
            padding: 2rem 2.5rem;
            border-radius: 1.5rem;
            max-width: 28rem;
            width: 100%;
            text-align: center;
            position: absolute;
            top: 8vh;
            left: 2vh;
            box-sizing: border-box;
            box-shadow: 0 0.5rem 2rem rgba(0, 0, 0, 0.25);
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            right: 1.5rem;
            top: 1.5rem;
            cursor: pointer;
            font-size: 2.5rem;
            color: #666;
            width: 3.5rem;
            height: 3.5rem;
            line-height: 3.5rem;
            text-align: center;
        }

        .modal h3 {
            margin: 0 0 2.5rem;
            font-size: 3rem;
            color: #333;
            font-weight: 500;
        }

        .browser-tip-image {
            width: 200px;
            margin: 10px auto;
            display: block;
        }

        /* æµè§ˆå™¨å›¾æ ‡æ ·å¼ */
        .browser-icon {
            width: 8rem;
            height: 8rem;
            margin: 2.5rem auto;
            display: block;
        }

        .browser-icon path {
            fill: #3080E9;
        }

        /* èœå•å›¾æ ‡æ ·å¼ */
        .menu-icon {
            width: 2.5rem;
            height: 2.5rem;
            vertical-align: middle;
            margin: 0 0.75rem;
            display: inline-block;
        }

        .menu-icon path {
            fill: #58595B;
        }

        /* æç¤ºæ­¥éª¤æ ·å¼ */
        .tip-steps {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            font-size: 2rem;
            color: #333;
            flex-wrap: wrap;
            gap: 1rem;
            line-height: 1.6;
        }

        .tip-steps .step {
            margin: 0 0.5rem;
        }

        /* æ¸¸æˆå¯åŠ¨è¦†ç›–å±‚æ ·å¼ */
        .game-start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        .game-start-overlay.hide {
            opacity: 0;
            pointer-events: none;
        }

        .start-content {
            text-align: center;
            color: white;
            padding: 3rem;
            border-radius: 2rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .start-icon {
            font-size: 5rem;
            margin-bottom: 1.5rem;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            20%,
            50%,
            80%,
            100% {
                transform: translateY(0);
            }

            40% {
                transform: translateY(-10px);
            }

            60% {
                transform: translateY(-5px);
            }
        }

        .start-content h2 {
            font-size: 2.5rem;
            margin: 0 0 1rem;
            font-weight: 500;
        }

        .start-content p {
            font-size: 1.2rem;
            margin: 0 0 2.5rem;
            opacity: 0.9;
        }

        .start-button {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            border: none;
            padding: 1rem 2.5rem;
            font-size: 1.3rem;
            border-radius: 3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-weight: 600;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .start-button:active {
            transform: translateY(0);
        }

        @media (max-width: 768px) {
            .start-content {
                padding: 2rem;
                margin: 1rem;
            }

            .start-icon {
                font-size: 4rem;
            }

            .start-content h2 {
                font-size: 2rem;
            }

            .start-content p {
                font-size: 1rem;
            }

            .start-button {
                font-size: 1.1rem;
                padding: 0.8rem 2rem;
            }
        }

        /* ç§»åŠ¨ç«¯é€‚é… */
        @media screen and (max-width: 768px) {
            .float-button {
                top: 2vh;
                left: 2vh;
                padding: 1rem 1.5rem;
                font-size: 1.5rem;
                border-radius: 2rem;
            }

            .modal-content {
                padding: 2.5rem 2rem;
                max-width: calc(100vw - 4vh);
                top: 10vh;
                left: 2vh;
                right: 2vh;
                width: auto;
            }

            .modal h3 {
                font-size: 2.5rem;
                margin: 0 0 2rem;
            }

            .tip-steps {
                font-size: 1.75rem;
                margin: 1.5rem 0;
                gap: 1rem;
            }

            .browser-icon {
                width: 7rem;
                height: 7rem;
                margin: 2rem auto;
            }

            .menu-icon {
                width: 2.5rem;
                height: 2.5rem;
                margin: 0 0.5rem;
            }

            .modal-close {
                font-size: 2.5rem;
                width: 3rem;
                height: 3rem;
                line-height: 3rem;
                right: 1rem;
                top: 1rem;
            }
        }

        /* ä¸­ç­‰å±å¹•é€‚é… */
        @media screen and (max-width: 480px) {
            .float-button {
                padding: 0.875rem 1.375rem;
                font-size: 1.375rem;
            }

            .modal-content {
                max-width: calc(100vw - 3vh);
                top: 9vh;
                left: 1.5vh;
                right: 1.5vh;
            }

            .modal h3 {
                font-size: 2.25rem;
            }

            .tip-steps {
                font-size: 1.625rem;
            }

            .browser-icon {
                width: 6.5rem;
                height: 6.5rem;
            }

            .menu-icon {
                width: 2.25rem;
                height: 2.25rem;
            }
        }

        /* è¶…å°å±å¹•é€‚é… */
        @media screen and (max-width: 320px) {
            :root {
                font-size: 4vw;
            }

            .float-button {
                padding: 0.75rem 1.25rem;
                font-size: 1.25rem;
                top: 1.5vh;
                left: 1.5vh;
            }

            .modal-content {
                padding: 2rem 1.5rem;
                top: 12vh;
                left: 1.5vh;
                right: 1.5vh;
                max-width: calc(100vw - 3vh);
            }

            .modal h3 {
                font-size: 2rem;
                margin: 0 0 1.5rem;
            }

            .tip-steps {
                font-size: 1.5rem;
                margin: 1.25rem 0;
                gap: 0.75rem;
            }

            .browser-icon {
                width: 6rem;
                height: 6rem;
                margin: 1.5rem auto;
            }

            .menu-icon {
                width: 2rem;
                height: 2rem;
                margin: 0 0.25rem;
            }

            .modal-close {
                font-size: 2rem;
                width: 2.5rem;
                height: 2.5rem;
                line-height: 2.5rem;
                right: 0.75rem;
                top: 0.75rem;
            }
        }
    </style>
</head>

<body>
    <!-- æ‚¬æµ®æŒ‰é’® - åªåœ¨iOSå¾®ä¿¡å†…æ˜¾ç¤º -->
    <div class="float-button" id="helpButton" onclick="showModal()" style="display: none;">æ— æ³•æ‰“å¼€ï¼Ÿ</div>

    <!-- å¼¹çª— - åªåœ¨iOSå¾®ä¿¡å†…æ˜¾ç¤º -->
    <div class="modal" id="helpModal" onclick="hideModal(event)">
        <div class="modal-content">
            <span class="modal-close" onclick="hideModal(event)">Ã—</span>
            <h3>æ— æ³•æ­£å¸¸æ‰“å¼€ï¼Ÿ</h3>
            <div class="tip-steps">
                <span class="step">ç‚¹å‡»å³ä¸Šè§’</span>
                <svg class="menu-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                    <path d="M188.2 507.2m-91.5 0a91.5 91.5 0 1 0 183 0 91.5 91.5 0 1 0-183 0Z"></path>
                    <path d="M516.2 507.2m-91.5 0a91.5 91.5 0 1 0 183 0 91.5 91.5 0 1 0-183 0Z"></path>
                    <path d="M836.5 507.2m-91.5 0a91.5 91.5 0 1 0 183 0 91.5 91.5 0 1 0-183 0Z"></path>
                </svg>
                <span class="step">é€‰æ‹©ã€Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€</span>
            </div>
            <svg class="browser-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M512 885.76a392.2944 392.2944 0 1 1 392.192-392.192A392.6016 392.6016 0 0 1 512 885.76z m0-702.5664A310.3744 310.3744 0 1 0 822.6816 493.568 310.6816 310.6816 0 0 0 512 183.1936z">
                </path>
                <path
                    d="M978.432 263.8848c-22.9376-46.6944-127.2832-36.5568-193.7408-11.3664l29.0816 76.5952c4.3008-1.6384 8.6016-3.1744 12.8-4.5056l-8.704 5.4272c-76.0832 47.0016-187.0848 107.1104-304.64 165.0688S280.2688 604.16 196.7104 636.1088l-2.1504 0.8192-30.72-49.5616C91.136 632.2176 22.4256 674.7136 46.3872 723.1488c9.216 18.8416 26.3168 26.112 48.3328 26.112 34.816 0 81.92-18.0224 131.072-36.5568 87.1424-33.0752 202.0352-84.1728 323.584-144.0768S781.6192 448.7168 860.8768 399.36c72.8064-44.544 141.5168-87.04 117.5552-135.4752zM125.7472 675.0208l24.064-26.624 11.3664 26.624z m739.7376-350.5152a98.304 98.304 0 0 0-18.2272-32.4608 152.1664 152.1664 0 0 1 57.0368-10.24 115.5072 115.5072 0 0 1-38.8096 42.7008z">
                </path>
            </svg>
        </div>
    </div>

    <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
    <div class="loading" id="loading">å›¾çº¸åŠ è½½ä¸­...</div>

    <!-- æ¸¸æˆå¯åŠ¨è¦†ç›–å±‚ -->
    <div class="game-start-overlay" id="gameStartOverlay">
        <div class="start-content">
            <div class="start-icon">ğŸš€</div>
            <h2>å‡†å¤‡å¼€å§‹ä½“éªŒ</h2>
            <p>ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹äº’åŠ¨å­¦ä¹ </p>
            <button class="start-button" id="startGameBtn">âœ¨ å¼€å§‹ä½“éªŒ</button>
        </div>
    </div>

    <div id="app">
        <div id="game-container"></div>
    </div>

    <script src="./javascript/index.js"></script>
    <script>
        // æ£€æµ‹æ˜¯å¦éœ€è¦æ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚
        function shouldShowStartOverlay() {
            // æ£€æŸ¥URLå‚æ•°ï¼Œå¦‚æœæŒ‡å®š ?no-overlay åˆ™éšè—å¯åŠ¨è¦†ç›–å±‚
            // é»˜è®¤æƒ…å†µä¸‹æ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚
            return location.search.indexOf('no-overlay') === -1;
        }

        // ç”¨æˆ·äº¤äº’çŠ¶æ€
        let userInteracted = false;
        let gameInitialized = false;

        // åˆå§‹åŒ–æ¸¸æˆ
        function initializeGame() {
            if (gameInitialized) return;

            console.log('ğŸ® åˆå§‹åŒ–æ¸¸æˆ...');
            gameInitialized = true;

            // éšè—åŠ è½½æŒ‡ç¤ºå™¨
            setTimeout(() => {
                const loading = document.getElementById('loading');
                if (loading) loading.style.display = 'none';
            }, 1000);

            // æ¸¸æˆé…ç½®
            if (window['::::LIVE_CONTEXT::::']) {
                const config = {
                    width: 1920,
                    height: 1440,
                    scale: {
                        mode: Phaser.Scale.FIT,
                        autoCenter: Phaser.Scale.CENTER_BOTH
                    },
                    physics: {
                        default: 'arcade'
                    },
                    dom: {
                        createContainer: true
                    },
                    parent: 'game-container',
                    transparent: false
                };
                const game = new Phaser.Game(config);
                window.addScene(game, '../../rec--r0-z02--fruit-to-be-paired--20250822174555/', { logger: console.log });
                setTimeout(() => {
                    game.events.emit('interactionStart')
                }, 500)
            }

            if (window['::::REC_CONTEXT::::']) {
                const config = {
                    width: 1920,
                    height: 1080,
                    scale: {
                        mode: Phaser.Scale.FIT,
                        autoCenter: Phaser.Scale.CENTER_BOTH
                    },
                    physics: {
                        default: 'arcade'
                    },
                    dom: {
                        createContainer: true
                    },
                    parent: 'game-container',
                    transparent: false
                };
                const game = new Phaser.Game(config);
                window.addScene(game, '../../rec--r0-z02--fruit-to-be-paired--20250822174555/', { logger: console.log });
                setTimeout(() => {
                    game.events.emit('questionStart')
                }, 500)
            }

            // é€šç”¨æ¸¸æˆé…ç½®ï¼ˆå¦‚æœæ²¡æœ‰ç‰¹å®šä¸Šä¸‹æ–‡ï¼‰
            if (!window['::::LIVE_CONTEXT::::'] && !window['::::REC_CONTEXT::::']) {
                const config = {
                    width: 1920,
                    height: 1440,
                    scale: {
                        mode: Phaser.Scale.FIT,
                        autoCenter: Phaser.Scale.CENTER_BOTH
                    },
                    physics: {
                        default: 'arcade'
                    },
                    dom: {
                        createContainer: true
                    },
                    parent: 'game-container',
                    transparent: false
                };
                const game = new Phaser.Game(config);
                window.addScene(game, '../../rec--r0-z02--fruit-to-be-paired--20250822174555/', { logger: console.log });
                setTimeout(() => {
                    game.events.emit('interactionStart')
                }, 500)
            }
        }

        // å¯åŠ¨æ¸¸æˆå‡½æ•°
        function startGame() {
            console.log('ğŸš€ ç”¨æˆ·ç‚¹å‡»å¯åŠ¨æ¸¸æˆ');
            userInteracted = true;

            // éšè—å¯åŠ¨è¦†ç›–å±‚
            const overlay = document.getElementById('gameStartOverlay');
            if (overlay) {
                overlay.classList.add('hide');
                setTimeout(() => {
                    overlay.style.display = 'none';
                }, 500);
            }

            // åˆå§‹åŒ–æ¸¸æˆ
            initializeGame();
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„å¤„ç†
        document.addEventListener('DOMContentLoaded', function () {
            const overlay = document.getElementById('gameStartOverlay');
            const startBtn = document.getElementById('startGameBtn');

            // ç»‘å®šå¯åŠ¨æŒ‰é’®äº‹ä»¶
            if (startBtn) {
                startBtn.addEventListener('click', startGame);
            }

            // æ£€æµ‹æ˜¯å¦éœ€è¦æ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚
            if (shouldShowStartOverlay()) {
                console.log('ğŸ” éœ€è¦æ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚');
                // æ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚
                if (overlay) {
                    overlay.style.display = 'flex';
                }
            } else {
                console.log('ğŸ“± ä¸éœ€è¦æ˜¾ç¤ºå¯åŠ¨è¦†ç›–å±‚ï¼Œç›´æ¥å¯åŠ¨æ¸¸æˆ');
                // ç›´æ¥å¯åŠ¨æ¸¸æˆ
                userInteracted = true;
                if (overlay) {
                    overlay.style.display = 'none';
                }
                initializeGame();
            }
        });

        // å¤‡ç”¨æ–¹æ¡ˆï¼šç›‘å¬ä»»ä½•ç”¨æˆ·äº¤äº’
        function handleUserInteraction() {
            if (!userInteracted && gameInitialized) {
                console.log('ğŸ’¡ æ£€æµ‹åˆ°ç”¨æˆ·äº¤äº’ï¼Œè§¦å‘æ¸¸æˆäº‹ä»¶');
                userInteracted = true;

                // å°è¯•é‡æ–°è§¦å‘æ¸¸æˆäº‹ä»¶
                setTimeout(() => {
                    if (window.game && window.game.events) {
                        if (window['::::LIVE_CONTEXT::::']) {
                            window.game.events.emit('interactionStart');
                        } else if (window['::::REC_CONTEXT::::']) {
                            window.game.events.emit('questionStart');
                        } else {
                            window.game.events.emit('interactionStart');
                        }
                    }
                }, 100);
            }
        }

        // ç›‘å¬å„ç§ç”¨æˆ·äº¤äº’äº‹ä»¶
        ['click', 'touchstart', 'keydown'].forEach(event => {
            document.addEventListener(event, handleUserInteraction, { once: true });
        });
    </script>

    <!-- iOSå¾®ä¿¡æ£€æµ‹å’Œå¼¹çª—æ§åˆ¶è„šæœ¬ -->
    <script>
        // æ£€æµ‹æ˜¯å¦ä¸ºiOSè®¾å¤‡
        function isIOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        }

        // æ£€æµ‹æ˜¯å¦ä¸ºå¾®ä¿¡å†…ç½®æµè§ˆå™¨
        function isWeixinBrowser() {
            var isWeixin = false;

            // é¦–å…ˆæ£€æŸ¥User Agent
            if (/MicroMessenger/i.test(navigator.userAgent)) {
                // ç„¶åæ£€æŸ¥WeixinJSBridge
                if (typeof WeixinJSBridge == "object" && typeof WeixinJSBridge.invoke == "function") {
                    isWeixin = true;
                } else {
                    // ç›‘å¬WeixinJSBridgeå‡†å¤‡å°±ç»ªäº‹ä»¶
                    if (document.addEventListener) {
                        document.addEventListener("WeixinJSBridgeReady", function () {
                            isWeixin = true;
                            checkAndShowHelpButton();
                        }, false);
                    } else if (document.attachEvent) {
                        document.attachEvent("WeixinJSBridgeReady", function () {
                            isWeixin = true;
                            checkAndShowHelpButton();
                        });
                        document.attachEvent("onWeixinJSBridgeReady", function () {
                            isWeixin = true;
                            checkAndShowHelpButton();
                        });
                    }
                }
            }

            return isWeixin;
        }

        // æ£€æŸ¥å¹¶æ˜¾ç¤ºå¸®åŠ©æŒ‰é’®
        function checkAndShowHelpButton() {
            const helpButton = document.getElementById('helpButton');
            const helpModal = document.getElementById('helpModal');

            if (isIOS() && isWeixinBrowser()) {
                // åœ¨iOSå¾®ä¿¡ç¯å¢ƒä¸­æ˜¾ç¤ºå¸®åŠ©æŒ‰é’®
                if (helpButton) {
                    helpButton.style.display = 'block';
                }
                // ç¡®ä¿å¼¹çª—å¤„äºå¯ç”¨çŠ¶æ€ä½†é»˜è®¤éšè—
                if (helpModal) {
                    helpModal.classList.remove('show');
                }

                console.log('æ£€æµ‹åˆ°iOSå¾®ä¿¡ç¯å¢ƒï¼Œæ˜¾ç¤ºå¸®åŠ©æŒ‰é’®');
            } else {
                // åœ¨å…¶ä»–ç¯å¢ƒä¸­éšè—å¸®åŠ©æŒ‰é’®å’Œå¼¹çª—
                if (helpButton) {
                    helpButton.style.display = 'none';
                }
                if (helpModal) {
                    helpModal.classList.remove('show');
                }

                console.log('éiOSå¾®ä¿¡ç¯å¢ƒï¼Œéšè—å¸®åŠ©åŠŸèƒ½');
            }
        }

        // æ˜¾ç¤ºå¼¹çª—
        function showModal() {
            console.log('showModal');
            const modal = document.getElementById('helpModal');
            if (modal) {
                modal.classList.add('show');
            }
        }

        // éšè—å¼¹çª—
        function hideModal(event) {
            console.log('hideModal');
            const modal = document.getElementById('helpModal');
            const modalContent = modal.querySelector('.modal-content');

            // å¦‚æœç‚¹å‡»çš„æ˜¯æ¨¡æ€æ¡†å¤–éƒ¨æˆ–å…³é—­æŒ‰é’®ï¼Œåˆ™å…³é—­å¼¹çª—
            if (event.target === modal || event.target.className === 'modal-close') {
                modal.classList.remove('show');
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè¿›è¡Œæ£€æµ‹
        window.addEventListener('load', function () {
            // å»¶è¿Ÿæ£€æµ‹ï¼Œç¡®ä¿å¾®ä¿¡ç¯å¢ƒå®Œå…¨åˆå§‹åŒ–
            setTimeout(function () {
                checkAndShowHelpButton();
            }, 500);
        });

        // ç«‹å³æ£€æµ‹ä¸€æ¬¡ï¼ˆå¦‚æœWeixinJSBridgeå·²ç»å‡†å¤‡å¥½ï¼‰
        checkAndShowHelpButton();
    </script>
</body>

</html>